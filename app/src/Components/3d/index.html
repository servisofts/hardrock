<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0">
    <title>My first three.js app</title>
    <style>
        body {
            margin: 0;
        }
    </style>
</head>
<body>
    <script src="https://threejs.org/build/three.js"></script>
    <script src="https://cdn.rawgit.com/mrdoob/three.js/master/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://raw.githubusercontent.com/mrdoob/three.js/master/examples/js/controls/FirstPersonControls.js"></script>
    <!--<script src="https://82mou.github.io/threejs/js/OrbitControls.js"></script>-->

    <script type="module">
        
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.x = 105.60000000000038;
        camera.position.y = 15;
        camera.position.z = 48.39999999999971;

        camera.rotation.x = 0;
        camera.rotation.y = 1.2799999999999736;
        camera.rotation.z = 0;


        const renderer = new THREE.WebGLRenderer({ antialias:true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.outputEnconding = THREE.sRGBEncoding;
        renderer.physicallyCorrectLights = false;

        document.body.appendChild(renderer.domElement);

        

        var mouse = new THREE.Vector2();
        var raycaster = new THREE.Raycaster();
        raycaster.setFromCamera(mouse, camera);

        const scene = new THREE.Scene();
        const light = new THREE.PointLight( 0xffffff, 1, 100 );
        light.position.set( 10, 15, 20 );
        light.rotation.set( 0.5, 0.5, 0.5 );
        scene.add(light);

        const glowline = new WHS.GlowLine({
            geometry: {
                radius: 0.1,
                delta: 0.2,
                curveDetail: 64,
                curve: new THREE.CubicBezierCurve3(
                new THREE.Vector3( -10, 0, 0 ),
                new THREE.Vector3( -5, 15, 0 ),
                new THREE.Vector3( 20, 15, 0 ),
                new THREE.Vector3( 10, 0, 0 )
                )
            },

            glow: {
                normalIntensity: 70,
                cameraIntensity: 0
            }
        });

        glowline.addTo(scene);


        var loader = new THREE.GLTFLoader();
        var guitarra;
        loader.load('../../Assets/3d/hr.gltf', (gltf) => {
            guitarra = gltf.scene;
            guitarra.position.y = 20;
            guitarra.scale.y += 10;
            guitarra.scale.x += 10;
            guitarra.scale.z += 10;
            glowscene.add(guitarra);
        });

        scene.add( glowscene );

        loader = new THREE.GLTFLoader();
        loader.load('../../Assets/3d/tablero.gltf', (gltf) => {
            scene.add(gltf.scene);
        });

        
        function animate() {

            raycaster.setFromCamera( mouse, camera );
          //  camera.position.x -= 0.1;
           // camera.position.z -= 0.15;
           // camera.rotation.y -= 0.005;
            //mover();
            
            if(camera.position.x > 0){
                camera.position.x -= 0.5;
            }
            if(camera.position.z > 20){
                camera.position.z -= 0.09;
            }
            if(camera.rotation.y > 0){
                camera.rotation.y -= 0.0061;
            }


            if(guitarra) guitarra.rotation.y += 0.02;
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
        };

        function onMouseMove( event ) {
            mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;
            mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;
        }

        
        function randomBetween(min, max) {
            return min + Math.floor(Math.random() * (max - min + 1));
        }
        

        function onDocumentMouseDown(event) {
            event.preventDefault();
            
            var intersects = raycaster.intersectObjects(scene.children);
            console.log(intersects);
            //camera.position.z += 10;
            if (intersects.length > 0) {
                
            }
        }

        document.addEventListener('mousedown', onDocumentMouseDown, false);

        animate();
    </script>
</body>

</html>